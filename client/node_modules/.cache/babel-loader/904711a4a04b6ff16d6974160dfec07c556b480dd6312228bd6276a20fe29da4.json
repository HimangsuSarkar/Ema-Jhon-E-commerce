{"ast":null,"code":"// import * as firebase from \"firebase/app\";\n// import \"firebase/auth\";\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport firebaseConfig from './firebase.config';\nexport const initializeLoginFramework = () => {\n  if (firebase.apps.length === 0) {\n    firebase.initializeApp(firebaseConfig);\n  }\n};\nexport const handleGoogleSignIn = () => {\n  const googleProvider = new firebase.auth.GoogleAuthProvider();\n  return firebase.auth().signInWithPopup(googleProvider).then(res => {\n    const {\n      displayName,\n      photoURL,\n      email\n    } = res.user;\n    const signedInUser = {\n      isSignedIn: true,\n      name: displayName,\n      email: email,\n      photo: photoURL,\n      success: true\n    };\n    setUserToken();\n    return signedInUser;\n  }).catch(err => {\n    console.log(err);\n    console.log(err.message);\n  });\n};\nconst setUserToken = () => {\n  firebase.auth().currentUser.getIdToken( /* forceRefresh */true).then(function (idToken) {\n    sessionStorage.setItem();\n  }).catch(function (error) {});\n};\nexport const handleFbSignIn = () => {\n  const fbProvider = new firebase.auth.FacebookAuthProvider();\n  return firebase.auth().signInWithPopup(fbProvider).then(function (result) {\n    var token = result.credential.accessToken;\n    var user = result.user;\n    user.success = true;\n    return user;\n  }).catch(function (error) {\n    var errorCode = error.code;\n    var errorMessage = error.message;\n    console.log(errorCode, errorMessage);\n  });\n};\nexport const handleSignOut = () => {\n  return firebase.auth().signOut().then(res => {\n    const signedOutUser = {\n      isSignedIn: false,\n      name: '',\n      email: '',\n      photo: '',\n      error: '',\n      success: false\n    };\n    return signedOutUser;\n  }).catch(err => {\n    // An error happened.\n  });\n};\nexport const createUserWithEmailAndPassword = (name, email, password) => {\n  return firebase.auth().createUserWithEmailAndPassword(email, password).then(res => {\n    const newUserInfo = res.user;\n    newUserInfo.error = '';\n    newUserInfo.success = true;\n    updateUserName(name);\n    return newUserInfo;\n  }).catch(error => {\n    const newUserInfo = {};\n    newUserInfo.error = error.message;\n    newUserInfo.success = false;\n    return newUserInfo;\n  });\n};\nexport const signInWithEmailAndPassword = (email, password) => {\n  return firebase.auth().signInWithEmailAndPassword(email, password).then(res => {\n    const newUserInfo = res.user;\n    newUserInfo.error = '';\n    newUserInfo.success = true;\n    return newUserInfo;\n  }).catch(function (error) {\n    const newUserInfo = {};\n    newUserInfo.error = error.message;\n    newUserInfo.success = false;\n    return newUserInfo;\n  });\n};\nconst updateUserName = name => {\n  const user = firebase.auth().currentUser;\n  user.updateProfile({\n    displayName: name\n  }).then(function () {\n    console.log('user name updated successfully');\n  }).catch(function (error) {\n    console.log(error);\n  });\n};","map":{"version":3,"names":["firebase","firebaseConfig","initializeLoginFramework","apps","length","initializeApp","handleGoogleSignIn","googleProvider","auth","GoogleAuthProvider","signInWithPopup","then","res","displayName","photoURL","email","user","signedInUser","isSignedIn","name","photo","success","setUserToken","catch","err","console","log","message","currentUser","getIdToken","idToken","sessionStorage","setItem","error","handleFbSignIn","fbProvider","FacebookAuthProvider","result","token","credential","accessToken","errorCode","code","errorMessage","handleSignOut","signOut","signedOutUser","createUserWithEmailAndPassword","password","newUserInfo","updateUserName","signInWithEmailAndPassword","updateProfile"],"sources":["D:/Thesis/ema-jhon-e-commerce/src/components/Login/loginManager.js"],"sourcesContent":["// import * as firebase from \"firebase/app\";\r\n// import \"firebase/auth\";\r\nimport firebase from 'firebase/compat/app';\r\nimport 'firebase/compat/auth';\r\nimport firebaseConfig from './firebase.config';\r\n\r\nexport const initializeLoginFramework = () => {\r\n    if(firebase.apps.length === 0) {\r\n        firebase.initializeApp(firebaseConfig);\r\n    }\r\n}\r\n\r\nexport const handleGoogleSignIn = () => {\r\n    const googleProvider = new firebase.auth.GoogleAuthProvider();\r\n    return firebase.auth().signInWithPopup(googleProvider)\r\n    .then(res => {\r\n      const {displayName, photoURL, email} = res.user;\r\n      const signedInUser = {\r\n        isSignedIn: true,\r\n        name: displayName,\r\n        email: email,\r\n        photo: photoURL,\r\n        success: true\r\n      };\r\n      setUserToken();\r\n      return signedInUser;\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n      console.log(err.message);\r\n    })\r\n  }\r\nconst setUserToken = () => {\r\n   firebase.auth().currentUser.getIdToken(/* forceRefresh */ true).then(function(idToken) {\r\n  sessionStorage.setItem()\r\n}).catch(function(error) {\r\n  \r\n});\r\n }\r\n\r\n  export const handleFbSignIn = () => {\r\n    const fbProvider = new firebase.auth.FacebookAuthProvider();\r\n    return firebase.auth().signInWithPopup(fbProvider).then(function(result) {\r\n      var token = result.credential.accessToken;\r\n      var user = result.user;\r\n      user.success = true;\r\n      return user;\r\n    }).catch(function(error) {\r\n      var errorCode = error.code;\r\n      var errorMessage = error.message;\r\n      console.log(errorCode, errorMessage)\r\n    });\r\n  }\r\n\r\n  export const handleSignOut = () => {\r\n    return firebase.auth().signOut()\r\n    .then(res => {\r\n      const signedOutUser = {\r\n        isSignedIn: false,\r\n        name: '',\r\n        email: '',\r\n        photo: '',\r\n        error: '',\r\n        success: false\r\n      }\r\n      return signedOutUser;\r\n    }).catch(err => {\r\n      // An error happened.\r\n    });\r\n  }\r\n\r\n export const createUserWithEmailAndPassword = (name, email, password) => {\r\n    return firebase.auth().createUserWithEmailAndPassword(email, password)\r\n    .then( res => {\r\n      const newUserInfo = res.user;\r\n      newUserInfo.error = '';\r\n      newUserInfo.success = true;\r\n      updateUserName(name);\r\n      return newUserInfo;\r\n    })\r\n    .catch( error => {\r\n      const newUserInfo = {};\r\n      newUserInfo.error = error.message;\r\n      newUserInfo.success = false;\r\n      return newUserInfo;\r\n    });\r\n }\r\n\r\n export const signInWithEmailAndPassword = (email, password) =>{\r\n    return firebase.auth().signInWithEmailAndPassword(email, password)\r\n    .then(res => {\r\n      const newUserInfo = res.user;\r\n      newUserInfo.error = '';\r\n      newUserInfo.success = true;\r\n      return newUserInfo;\r\n    })\r\n    .catch(function(error) {\r\n      const newUserInfo = {};\r\n      newUserInfo.error = error.message;\r\n      newUserInfo.success = false;\r\n      return newUserInfo;\r\n    });\r\n }\r\n\r\n const updateUserName = name =>{\r\n    const user = firebase.auth().currentUser;\r\n\r\n    user.updateProfile({\r\n      displayName: name\r\n    }).then(function() {\r\n      console.log('user name updated successfully')\r\n    }).catch(function(error) {\r\n      console.log(error)\r\n    });\r\n  }"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}